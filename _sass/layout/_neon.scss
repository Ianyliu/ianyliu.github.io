/* ========================================================================== 
   NEON ACCENTS (subtle academic flair)
   ========================================================================== */

// Accent palette (tuned for accessibility and subtlety)
$neon-accent: #00e5ff;      // cyan accent
$neon-accent-soft: rgba(0, 229, 255, 0.5);
$neon-accent-faint: rgba(0, 229, 255, 0.22);
$neon-magenta: #ff3dbb;    // secondary accent for hovers
$neon-magenta-soft: rgba(255, 61, 187, 0.45);

// CSS variables to allow theme switching compatibility
:root {
  --neon-accent: #{$neon-accent};
  --neon-accent-soft: #{$neon-accent-soft};
  --neon-accent-faint: #{$neon-accent-faint};
  --neon-magenta: #{$neon-magenta};
}

html[data-theme="dark"] {
  --neon-accent: #66f0ff; // slightly brighter on dark
  --neon-accent-soft: rgba(102, 240, 255, 0.55);
  --neon-accent-faint: rgba(102, 240, 255, 0.26);
  --neon-magenta: #ff6ad5;
}

/* Quick cinematic fade/zoom-in on initial paint */
@keyframes neon-cinematic-in {
  0% { opacity: 0; transform: translateY(6px) scale(0.99); filter: blur(6px) saturate(0.9); }
  100% { opacity: 1; transform: none; filter: none; }
}

.neon-preload-active { 
  animation: neon-cinematic-in 0.5s ease-out both; 
}

/* Links: keep body text sober, add understated hover glow */
a {
  color: var(--global-link-color);
  text-decoration-color: var(--neon-accent);
  text-underline-offset: 2px;

  &:hover {
    color: var(--global-link-color-hover);
    text-shadow: 0 0 10px var(--neon-accent-soft);
  }

  &:focus {
    outline: 2px solid var(--neon-accent);
    outline-offset: 2px;
  }
}

/* Masthead and navigation underline accent */
.masthead {
  &::after {
    height: 3px;
    background: linear-gradient(90deg, var(--neon-accent), transparent 35%, transparent 65%, var(--neon-accent));
    box-shadow: 0 0 10px var(--neon-accent-faint);
  }
}

.masthead__menu-item > a {
  position: relative;

  &:after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -8px;
    width: 0;
    height: 3px;
    background: var(--neon-accent);
    box-shadow: 0 0 12px var(--neon-accent-soft);
    transition: width 180ms ease;
  }

  &:hover:after,
  &:focus:after,
  &.active:after {
    width: 100%;
  }
}

/* Buttons: subtle gradient and glow on hover */
.btn {
  background: linear-gradient(180deg, var(--global-base-color), mix(white, var(--global-base-color), 6%));
  box-shadow: 0 0 0 rgba(0,0,0,0);
  border: 1px solid transparent;

  &:hover {
    box-shadow: 0 0 0 rgba(0,0,0,0), 0 0 18px var(--neon-accent-faint);
    border-color: var(--neon-accent);
  }
}

/* Code blocks: add a faint border glow */
.highlight,
pre,
code {
  border-color: var(--neon-accent);
  box-shadow: 0 0 0 rgba(0,0,0,0), 0 0 10px var(--neon-accent-faint);
}

/* Headings: slightly thicker left border accent */
h1, h2, h3 {
  position: relative;
}

h1:before, h2:before, h3:before {
  content: "";
  position: absolute;
  left: -0.75rem;
  top: 0.35em;
  height: 0.7em;
  width: 6px;
  border-radius: 3px;
  background: linear-gradient(180deg, var(--neon-accent), var(--neon-magenta));
  box-shadow: 0 0 10px var(--neon-accent-soft);
}

/* Cards/teasers: add border and hover lift */
.archive__item,
.archive__item-teaser,
.page__content .box,
.sidebar {
  border: 1px solid var(--global-border-color);
  border-image: linear-gradient(90deg, var(--neon-accent), rgba(0,0,0,0)) 1;
}

.archive__item:hover,
.archive__item-teaser:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 22px rgba(0,0,0,0.06), 0 0 14px var(--neon-accent-faint);
}

/* Footer divider glow */
.page__footer:before {
  content: "";
  display: block;
  height: 3px;
  margin-bottom: 1rem;
  background: linear-gradient(90deg, var(--neon-accent), transparent 35%, transparent 65%, var(--neon-accent));
  box-shadow: 0 0 12px var(--neon-accent-faint);
}

/* Tables: header underline accent */
th {
  border-bottom: 2px solid var(--neon-accent);
}

/* Selection color for polish */
::selection {
  background: var(--neon-accent);
  color: #00242a;
}

/* Images with .align-right/left get a subtle glow */
img.align-right,
img.align-left,
.align-right img,
.align-left img {
  box-shadow: 0 0 0 rgba(0,0,0,0), 0 0 16px var(--neon-accent-faint);
}

/* Callouts/notices with accent border */
.notice--info,
.notice--warning,
.notice--danger,
.notice--success {
  border-left: 5px solid var(--neon-accent);
  box-shadow: inset 0 0 12px -10px var(--neon-accent-soft);
}

/* Site search input and form controls focus state */
input:focus,
textarea:focus,
select:focus {
  border-color: var(--neon-accent);
  box-shadow: 0 0 0 2px var(--neon-accent-faint);
}

/* Reduce motion preference: remove glow animations and cinematic intro */
@media (prefers-reduced-motion: reduce) {
  body { animation: none !important; }
  a:hover { text-shadow: none; }
  .masthead__menu-item > a:after { transition: none; }
  .archive__item:hover,
  .archive__item-teaser:hover { transform: none; }
}

/* Starry cinematic intro (0.7s): Twinkle + Shooting Star + Aurora Wash */
@keyframes neon-page-in {
  0% { opacity: 0; transform: translateY(4px); filter: blur(3px) saturate(0.95); }
  100% { opacity: 1; transform: none; filter: none; }
}

@keyframes neon-twinkle {
  0% { opacity: 0; }
  40% { opacity: 0.7; }
  100% { opacity: 0; }
}

@keyframes neon-shoot {
  0% { opacity: 0; transform: translate(-10vw, -5vh) rotate(-20deg); }
  20% { opacity: 1; }
  100% { opacity: 0; transform: translate(100vw, 35vh) rotate(-20deg); }
}

@keyframes neon-aurora-bg {
  0% { background-position: 50% -120%; opacity: 0.65; }
  100% { background-position: 50% 100%; opacity: 0; }
}

/* Base fade for content + aurora wash behind content */
.neon-preload-active {
  animation: neon-page-in 0.7s ease-out both;
  background-image: linear-gradient(180deg, rgba(0, 229, 255, 0.14) 0%, rgba(255, 61, 187, 0.08) 40%, rgba(0,0,0,0) 100%);
  background-size: 100% 220%;
  background-repeat: no-repeat;
  animation-name: neon-page-in, neon-aurora-bg;
  animation-duration: 0.7s, 0.7s;
  animation-timing-function: ease-out, ease-out;
  animation-fill-mode: both, both;
}

/* Foreground overlay: stars (twinkle) */
.neon-preload-active::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  /* Medium density: two star layers */
  background-image:
    radial-gradient(2px 2px at 8% 18%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 18% 32%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 26% 12%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 34% 26%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 42% 16%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 52% 22%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 60% 10%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 70% 24%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 78% 14%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(2px 2px at 88% 20%, rgba(255,255,255,.85), transparent 60%),
    radial-gradient(1.5px 1.5px at 12% 72%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1.5px 1.5px at 20% 84%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1.5px 1.5px at 32% 64%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1.5px 1.5px at 44% 76%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1.5px 1.5px at 56% 62%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1.5px 1.5px at 66% 80%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1.5px 1.5px at 74% 66%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1.5px 1.5px at 86% 78%, rgba(255,255,255,.8), transparent 60%),
    radial-gradient(1px 1px at 6% 46%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 18% 54%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 30% 48%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 42% 58%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 54% 50%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 66% 56%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 78% 46%, rgba(255,255,255,.7), transparent 60%),
    radial-gradient(1px 1px at 90% 54%, rgba(255,255,255,.7), transparent 60%);
  background-repeat: no-repeat;
  animation: neon-twinkle 0.7s ease-out both;
  mix-blend-mode: screen;
}

/* Foreground overlay: single shooting star sweep */
.neon-preload-active::after {
  content: "";
  position: fixed;
  left: 0; top: 0;
  width: 140px; height: 2px;
  z-index: 10000;
  pointer-events: none;
  background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.95) 45%, rgba(255,255,255,0));
  filter:
    drop-shadow(0 0 6px var(--neon-accent-soft))
    drop-shadow(0 0 10px rgba(255,255,255,0.4));
  transform: translate(-15vw, -10vh) rotate(-20deg);
  animation: neon-shoot 0.6s ease-out 0.1s both;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .neon-preload-active {
    animation: none !important;
    background-image: none !important;
  }
  .neon-preload-active::before,
  .neon-preload-active::after { display: none !important; }
}
